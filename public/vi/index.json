[
{
	"uri": "/vi/1-introduce/",
	"title": "Giới thiệu",
	"tags": [],
	"description": "",
	"content": "Tổng quan Là khách hàng đã đăng ký, khi bạn cần một chuyến đi, bạn có thể sử dụng ứng dụng khách hàng Wild Rydes để yêu cầu một con kỳ lân và quản lý mọi thứ xung quanh nó. Là một kỳ lân đã đăng ký, bạn có thể sử dụng ứng dụng kỳ lân Wild Rydes để quản lý mọi thứ xung quanh doanh nghiệp của mình.\nĐặc biệt, những chú kỳ lân quan tâm đến việc sử dụng ứng dụng để gửi hoàn thành chuyến đi sau khi họ đã đưa khách hàng đến đích thành công. Đây là trường hợp sử dụng bây giờ chúng ta sẽ xem xét kỹ hơn.\nTại Wild Rydes, khách hàng người dùng cuối thường giao tiếp thông qua REST API với các backend service. Đối với trường hợp sử dụng của chúng tôi, ứng dụng kỳ lân Wild Rydes tương tác với API được cung cấp bởi dịch vụ quản lý kỳ lân. Nó sử dụng tài nguyên gửi-hoàn thành chuyến đi để gửi các chi tiết liên quan của chuyến đi đến chương trình phụ trợ. Đáp lại điều đó, backend service tạo ra một tài nguyên mới cho chuyến đi đã hoàn thành và trả về mã trạng thái tương ứng, vị trí và biểu diễn của tài nguyên mới cho khách hàng.\nCó lẽ không có gì ngạc nhiên khi có các dịch vụ khác trong bối cảnh microservice của Wild Rydes, cũng quan tâm đến một chuyến đi mới đã hoàn thành:\nDịch vụ thông báo cho khách hàng: Khách hàng sẽ nhận được thông báo trong ứng dụng của họ về chuyến đi đã hoàn thành gần đây nhất của họ. Dịch vụ thanh toán khách hàng: Xét cho cùng, Wild Rydes là một doanh nghiệp, vì vậy dịch vụ này sẽ chịu trách nhiệm thu tiền vé từ khách hàng. Dịch vụ đi xe đặc biệt: Đây là dịch vụ đặc biệt quan tâm đến các chuyến đi với giá vé hoặc khoảng cách trên ngưỡng nhất định - chuẩn bị dữ liệu tương ứng cho các nhà tiếp thị và quản lý thành công. Trường hợp sử dụng này rõ ràng là thích hợp cho việc sử dụng thông báo xuất bản / đăng ký, có thể thoải mái thực hiện bằng cách sử dụng Amazon SNS theo cách không máy chủ và có thể mở rộng. Nó tách rời cả hai bên càng nhiều càng tốt. Các dịch vụ ở phía bên phải có thể tự chủ đăng ký chủ đề, ở phía bên trái. "
},
{
	"uri": "/vi/",
	"title": "Làm việc với SNS",
	"tags": [],
	"description": "",
	"content": "Làm việc với SNS Chúng ta sẽ thực hiện mô hình tích hợp API Fan-out và lọc tin nhắn. Là khách hàng đã đăng ký, khi bạn cần một chuyến đi, bạn có thể sử dụng ứng dụng khách hàng Wild Rydes để yêu cầu một con kỳ lân và quản lý nó. Là một kỳ lân đã đăng ký, bạn có thể sử dụng ứng dụng kỳ lân Wild Rydes để quản lý mọi thứ xung quanh doanh nghiệp của mình.\nĐặc biệt, những chú kỳ lân quan tâm đến việc sử dụng ứng dụng để gửi hoàn thành chuyến đi sau khi chúng đã đưa khách hàng đến đích thành công. Đây là trường hợp sử dụng chúng ta sẽ xem xét kỹ hơn.\nTại Wild Rydes, khách hàng người dùng cuối thường giao tiếp thông qua REST API với các backend service. Đối với trường hợp sử dụng của chúng tôi, ứng dụng kỳ lân Wild Rydes tương tác với API được cung cấp bởi dịch vụ quản lý kỳ lân. Nó sử dụng tài nguyên gửi-hoàn thành chuyến đi để gửi các chi tiết liên quan của chuyến đi đến chương trình phụ trợ. Đáp lại điều đó, backend service tạo ra một tài nguyên mới cho chuyến đi đã hoàn thành và trả về mã trạng thái tương ứng, vị trí và biểu diễn của tài nguyên mới cho khách hàng.\nCó lẽ không có gì ngạc nhiên khi có các dịch vụ khác trong bối cảnh microservice của Wild Rydes, cũng quan tâm đến một chuyến đi mới đã hoàn thành:\nDịch vụ thông báo cho khách hàng: Khách hàng sẽ nhận được thông báo trong ứng dụng của họ về chuyến đi đã hoàn thành gần đây nhất của họ. Dịch vụ thanh toán khách hàng: Xét cho cùng, Wild Rydes là một doanh nghiệp, vì vậy dịch vụ này sẽ chịu trách nhiệm thu tiền vé từ khách hàng. Dịch vụ đi xe đặc biệt: Đây là dịch vụ đặc biệt quan tâm đến các chuyến đi với giá vé hoặc khoảng cách trên ngưỡng nhất định - chuẩn bị dữ liệu tương ứng cho các nhà tiếp thị và quản lý thành công. Trường hợp sử dụng này rõ ràng là thích hợp cho việc sử dụng thông báo xuất bản / đăng ký, có thể thoải mái thực hiện bằng cách sử dụng Amazon SNS theo cách không máy chủ và có thể mở rộng. Nó tách rời cả hai bên càng nhiều càng tốt. Các dịch vụ ở phía bên phải có thể tự chủ đăng ký chủ đề, ở phía bên trái. Bài thực hành này sẽ tiếp nối câu chuyện của bài thực hành Xây dựng serverless web app Wild Rydes\nNội dung Giới thiệu Các bước chuẩn bị Sử dụng SAM triển khai hạ tầng Tạo Amazon SNS Topic Tạo Customer notification Tạo Customer accounting service Tạo Extraordinary rides service Cập nhật Unicorn Management Service Kiểm tra Fan-out và lọc tin nhắn Dọn dẹp tài nguyên "
},
{
	"uri": "/vi/2-prerequiste/2.1-bootstrapawscloud9/",
	"title": "Triển khai hạ tầng",
	"tags": [],
	"description": "",
	"content": "Triển khai hạ tầng Trước hết để thực hiện bài lab, chúng ta cần khởi tạo tài nguyên bằng CloudFormation Các bạn truy cập vào đường dẫn để khởi tạo tài nguyên Serverless Kiểm tra lại giao diện và chọn Create stack Đợi khoảng 5-10 phút sau, Stack sẽ khởi tạo thành công Chọn Ouput của stack vừa tạo. Sau đó truy cập vào đường dẫn Cloud9 đã tạo. Thực hiện cấu hình môi trường Cloud9 đã tạo từ CloudFormation stack cd ~/environment/wild-rydes-async-messaging/code/lab-0\rchmod +x configureCloud9.sh\r./configureCloud9.sh "
},
{
	"uri": "/vi/2-prerequiste/",
	"title": "Các bước chuẩn bị",
	"tags": [],
	"description": "",
	"content": "Các bước chuẩn bị Đầu tiên, chúng tôi sẽ thiết lập trạng thái ban đầu, bao gồm việc tích hợp Unicorn Management Service (tận dụng Amazon API Gateway và AWS Lambda), Rides Store (tận dụng Amazon DynamoDB) và ba Serverless backend service - Customer notification, Customer accounting và Extraordinary rides service.\nNội dung Triển khai hạ tầng "
},
{
	"uri": "/vi/3-initstate/",
	"title": "Sử dụng SAM triển khai hạ tầng",
	"tags": [],
	"description": "",
	"content": "Sử dụng SAM triển khai hạ tầng Truy cập vào Cloud9 Chọn Your environments Chọn WildRydesAsyncMessaging Chọn Open IDE Sau khi mở giao diện Cloud9. Chúng ta bắt đầu build artifacts từ source cd ~/environment/wild-rydes-async-messaging/lab-1\rsam build Tiếp theo chúng ta triển khai ứng dụng export AWS_REGION=$(aws --profile default configure get region)\rsam deploy \\\r--stack-name wild-rydes-async-msg-1 \\\r--capabilities CAPABILITY_IAM \\\r--region $AWS_REGION \\\r--guided Gõ Enter 4 lần Đến phần SubmitRideCompletionFunction may not have authorization defined, Is this okay? [y/N]: thì nhập y Tiếp tục gõ Enter 4 lần nữa. Đợi khoảnh 10 phút sau, hoàn thành triển khai ứng dụng. Kiểm tra từ giao diện stack của CloudFormation thì stack đã được tạo. Kiểm tra giao diện Lambda thì đã có 4 hàm được tạo. Kiểm tra DynamoDB thì đã có 1 bảng mới xuất hiện. "
},
{
	"uri": "/vi/4-createsnstopic/",
	"title": "Tạo Amazon SNS Topic",
	"tags": [],
	"description": "",
	"content": "Tạo Amazon SNS Topic Truy cập giao diện Cloud9 IDE Mở SAM template wild-rydes-async-messaging/lab-1/template.yaml Trong phần Resources, bỏ comment đoạn code sau: RideCompletionTopic:\rType: AWS::SNS::Topic\rProperties:\rTopicName: RideCompletionTopic Thực hiện cập nhật AWS SAM template cd ~/environment/wild-rydes-async-messaging/lab-1\rsam build Thực hiện triển khai khởi tạo SNS topic sam deploy "
},
{
	"uri": "/vi/5-createcnss/",
	"title": "Tạo Customer notification service",
	"tags": [],
	"description": "",
	"content": "Tạo Customer notification Truy cập vào AWS SNS Chọn RideCompletionTopic Chọn Create subscription Quay lại giao diện Cloud9 để chạy lệnh xem Enpoint aws cloudformation describe-stacks \\\r--stack-name wild-rydes-async-msg-1 \\\r--query \u0026#39;Stacks[].Outputs[?OutputKey==`CustomerNotificationFunction`].OutputValue\u0026#39; \\\r--output text Trong giao diện Create subscription Topic ARN để mặc định Protocol chọn AWS Lambda Enpoint, nhập kết quả output từ Cloud9 Chọn Create subscription Truy cập vào Lambda Chọn Customer Notification function Kiểm tra Lambda function đã trigger SNS. "
},
{
	"uri": "/vi/6-create/",
	"title": "Tạo Customer accounting service",
	"tags": [],
	"description": "",
	"content": "Tạo Customer accounting service Truy cập vào SNS Chọn Topic Chọn RideCompletionTopic Chọn Create subscription Quay lại giao diện Cloud9 chạy lệnh để xem Endpoint aws cloudformation describe-stacks \\\r--stack-name wild-rydes-async-msg-1 \\\r--query \u0026#39;Stacks[].Outputs[?OutputKey==`CustomerAccountingFunction`].OutputValue\u0026#39; \\\r--output text Trong giao diện Create subscription Topic ARN giữ mặc định Protocol, chọn Lambda Endpoint, nhập giá trị Output của Cloud9 Chọn Create subscription Hoàn thành tạo subscription Truy cập vào AWS Lambda Chọn Customer Accounting function Kiểm tra Lambda function đã trigger SNS. "
},
{
	"uri": "/vi/7-create/",
	"title": "Tạo Extraordinary rides service",
	"tags": [],
	"description": "",
	"content": "Tạo Extraordinary rides service Sau khi đã tạo SNS subscription bằng console, chúng ta sẽ thử tạo subscription SNS bằng SAM.\nCập nhật AWS SAM template Mở file wild-rydes-async-messaging/lab-1/template.yaml trong Cloud9 và cập nhật đoạn code sau Events:\rSNSEvent:\rType: SNS\rProperties:\rTopic: !Ref RideCompletionTopic\rFilterPolicy:\rfare:\r- numeric:\r- \u0026#39;\u0026gt;=\u0026#39;\r- 50\rdistance:\r- numeric:\r- \u0026#39;\u0026gt;=\u0026#39;\r- 20 Cập nhật bằng lệnh sau: cd ~/environment/wild-rydes-async-messaging/lab-1\rsam build Sau khi cập nhật chúng ta sẽ triển khai bằng lệnh: sam deploy Kiểm tra subscription đã tạo thành công. Kiểm tra Lambda Function đã trigger SNS. "
},
{
	"uri": "/vi/8-update/",
	"title": "Cập nhật Unicorn Management Service",
	"tags": [],
	"description": "",
	"content": "Cập nhật Unicorn Management Service Sau khi tạo SNS Topic và các subscription theo kiến trúc:\nTrước hết chúng ta cấp IAM permission đến Lambda Cập nhật SAM template wild-rydes-async-messaging/lab-1/template.yaml - SNSPublishMessagePolicy:\rTopicName: !GetAtt RideCompletionTopic.TopicName Tiếp theo chúng ta phải cấp Amazon SNS topic ARN đến Lambda. Tiếp tục cập nhật SAM template wild-rydes-async-messaging/lab-1/template.yaml TOPIC_ARN: !Ref RideCompletionTopic Sau đó, chúng ta sẽ cập nhật Lambda function để gọi đến Amazon SNS Mở file wild-rydes-async-messaging/lab-1/unicorn-management-service/app.py sns = boto3.client(\u0026#39;sns\u0026#39;, config=config) Tiếp đến, chúng ta sẽ put item đến DynamoDB response = sns.publish(\rTopicArn=TOPIC_ARN,\rMessage=json.dumps(request),\rMessageAttributes = {\r\u0026#39;fare\u0026#39;: {\r\u0026#39;DataType\u0026#39;: \u0026#39;Number\u0026#39;,\r\u0026#39;StringValue\u0026#39;: str(request[\u0026#39;fare\u0026#39;])\r},\r\u0026#39;distance\u0026#39;: {\r\u0026#39;DataType\u0026#39;: \u0026#39;Number\u0026#39;,\r\u0026#39;StringValue\u0026#39;: str(request[\u0026#39;distance\u0026#39;])\r}\r}\r) Cập nhật template bằng lệnh sau: cd ~/environment/wild-rydes-async-messaging/lab-1\rsam build Sau khi cập nhật, chúng ta triển khai bằng lệnh sau: sam deploy "
},
{
	"uri": "/vi/9-test/",
	"title": "Kiểm tra Fan-Out và lọc tin nhắn",
	"tags": [],
	"description": "",
	"content": "Kiểm tra Fan-Out và lọc tin nhắn Trong bước này, chúng tôi sẽ xác nhận rằng Amazon SNS Topic đang xuất bản tất cả các tin nhắn cho tất cả người đăng ký. Vì người đăng ký cũng có thể không xử lý được tin nhắn, chúng tôi cũng muốn xác nhận rằng Amazon SNS đang gửi lại tin nhắn để chúng tôi không bỏ lỡ một tin nhắn nào.\nKiểm tra API Gateway endpoint aws cloudformation describe-stacks \\\r--stack-name wild-rydes-async-msg-1 \\\r--query \u0026#39;Stacks[].Outputs[?OutputKey==`UnicornManagementServiceApiSubmitRideCompletionEndpoint`].OutputValue\u0026#39; \\\r--output text Lưu trữ API Gateway endpoint URL. export ENDPOINT=$(aws cloudformation describe-stacks \\\r--stack-name wild-rydes-async-msg-1 \\\r--query \u0026#39;Stacks[].Outputs[?OutputKey==`UnicornManagementServiceApiSubmitRideCompletionEndpoint`].OutputValue\u0026#39; \\\r--output text) Gửi couple request đến Unicorn Management Service curl -XPOST -i -H \u0026#34;Content-Type:application/json\u0026#34; -d \u0026#39;{ \u0026#34;from\u0026#34;: \u0026#34;Berlin\u0026#34;, \u0026#34;to\u0026#34;: \u0026#34;Frankfurt\u0026#34;, \u0026#34;duration\u0026#34;: 420, \u0026#34;distance\u0026#34;: 600, \u0026#34;customer\u0026#34;: \u0026#34;cmr\u0026#34;, \u0026#34;fare\u0026#34;: 256.50 }\u0026#39; $ENDPOINT Truy cập vào CloudWatch Chọn Log groups Chọn /aws/lambda/wild-rydes-async-msg-1- Trong giao diện log group Chọn Log streams Chọn log stream đã được tạo. Quan sát chi tiết log events. "
},
{
	"uri": "/vi/10-cleanup/",
	"title": "Dọn dẹp tài nguyên",
	"tags": [],
	"description": "",
	"content": "Dọn dẹp tài nguyên Xóa AWS SAM template Vào giao diện AWS Cloud9 Chạy lệnh sau: cd ~/environment/wild-rydes-async-messaging/lab-1\raws cloudformation delete-stack \\\r--stack-name wild-rydes-async-msg-1 "
},
{
	"uri": "/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]